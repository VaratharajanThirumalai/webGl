<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Parent-Child Drag and Drop</title>
<style>
  body {
    font-family: Arial, sans-serif;
  }
  .container {
    display: flex;
  }
  .parent, .child {
    border: 1px solid #ccc;
    padding: 10px;
    margin: 5px;
    cursor: pointer;
  }
</style>
</head>
<body>

<div class="container">
  <div class="parent" draggable="true">
    Parent
    <ul class="children">Children
      <li class="child" draggable="true">Child 1</li>
      <li class="child" draggable="true">Child 2</li>
      <li class="child" draggable="true">Child 3</li>
    </ul>
  </div>
</div>

<script>
  const parents = document.querySelectorAll('.parent');
  const children = document.querySelectorAll('.child');

  let draggedItem = null;

  parents.forEach(parent => {
    parent.addEventListener('dragstart', () => {
      draggedItem = parent;
      setTimeout(() => {
        parent.style.display = 'none';
      }, 0);
    });

    parent.addEventListener('dragend', () => {
      setTimeout(() => {
        draggedItem.style.display = 'block';
        draggedItem = null;
      }, 0);
    });
  });

  children.forEach(child => {
    child.addEventListener('dragstart', () => {
      draggedItem = child;
      setTimeout(() => {
        child.style.display = 'none';
      }, 0);
    });

    child.addEventListener('dragend', () => {
      setTimeout(() => {
        draggedItem.style.display = 'block';
        draggedItem = null;
      }, 0);
    });
  });

  parents.forEach(parent => {
    parent.addEventListener('dragover', e => {
      e.preventDefault();
    });

    parent.addEventListener('dragenter', e => {
      e.preventDefault();
      parent.style.backgroundColor = 'rgba(0, 0, 0, 0.1)';
    });

    parent.addEventListener('dragleave', () => {
      parent.style.backgroundColor = 'transparent';
    });

    parent.addEventListener('drop', () => {
      parent.appendChild(draggedItem);
      parent.style.backgroundColor = 'transparent';
    });
  });

  children.forEach(child => {
    child.addEventListener('dragover', e => {
      e.preventDefault();
    });

    child.addEventListener('dragenter', e => {
      e.preventDefault();
      child.style.backgroundColor = 'rgba(10, 0, 0, 0.1)';
    });

    child.addEventListener('dragleave', () => {
      child.style.backgroundColor = 'transparent';
    });

    child.addEventListener('drop', () => {
      child.parentNode.insertBefore(draggedItem, child.nextSibling);
      child.style.backgroundColor = 'transparent';
    });
  });
</script>

</body>
</html>
