

 <!DOCTYPE html>
 <html>

 <head>
     <title>2D Canvas with Draggable and Scalable Shapes</title>
     <style>
         #canvas-container {
             position: relative;
             background-color: rgb(7, 7, 7);
         }

         #gridline {
             background-color: rgb(255, 231, 231);
             border: 10px solid black;
             padding: 10px;
         }

         #my-div {
             position: absolute;
             padding: 10px;
             margin: 0;
             padding: 0;
         }

         button {
             border: none;
             height: 20px;
             width: 55px;
         }

         button:hover {
             background-color: rgb(236, 229, 41);
         }

         body {
             margin: 0;
             padding: 0;
         }

         canvas {
             margin: 10px;
             padding: 10px;
             display: block;
           
         }

         .dragged-shape {
             border: 15px solid transparent;
             margin: 10px;
             padding: 3px;
         }

         defaultShapes.draggable {
             cursor: pointer;
         }
     </style>
 </head>

 <body>
     <div id="canvas-container">
         <canvas id="gridline" width="1860" height="890"></canvas>
         <div id='my-div'>
             <button id="delete-button">Delete</button><br>
             <button id="Copy-button">Copy</button>
         </div>
     </div>
     <script>
         const canvas = document.getElementById('gridline');
         const gl = canvas.getContext('2d');
         const div = document.getElementById('my-div');
         div.style.display = 'none';
         const defaultShapes = [
             { x: 475, y: 650, width: 270, height: 200, color: 'red', type: 'rectangle' },
             { x: 825, y: 860, width: 200, height: 200, color: 'green', type: 'triangle' },
         ];
         const shapes = [];
         let isDraggingShape = false;
         let isScalingShape = false;
         let shapeBeingDragged = null;
         let shapeBeingScaled = null;
         let scalingCorner = null;
         let selectedShape = null;
         let offsetX = 0;
         let offsetY = 0;
         let originalWidth = 0;
         let originalHeight = 0;

         function drawDefaultShapes() {
             defaultShapes.forEach(shape => {
                 if (shape.type === 'rectangle') {
                     gl.fillStyle = shape.color;
                     gl.fillRect(shape.x, shape.y, shape.width, shape.height);
                 } else if (shape.type === 'triangle') {
                     gl.fillStyle = shape.color;
                     gl.beginPath();
                     gl.moveTo(shape.x, shape.y);
                     gl.lineTo(shape.x + shape.width, shape.y - shape.height / 125);
                     gl.lineTo(shape.x + shape.width / 2, shape.y - shape.height);
                     gl.closePath();
                     gl.fill();
                 }
             });
         }

         canvas.addEventListener('click', (e) => {
             let x = e.clientX - canvas.getBoundingClientRect().left;
             let y = e.clientY - canvas.getBoundingClientRect().top;
             if (e.shiftKey) {
                 div.style.left = x + 'px';
                 div.style.top = y + 'px';
                 div.style.display = '';
             }
         });

         canvas.addEventListener('mousedown', (e) => {
             const mouseX = e.clientX - canvas.getBoundingClientRect().left;
             const mouseY = e.clientY - canvas.getBoundingClientRect().top;

             shapes.forEach(shape => {
                 if (
                     mouseX >= shape.x &&
                     mouseX <= shape.x + shape.width &&
                     mouseY >= shape.y &&
                     mouseY <= shape.y + shape.height
                 ) {
                      console.log(`Clicked on a ${shape.type} shape.`);

                     if (
                         mouseX >= shape.x + shape.width - 10 &&
                         mouseX <= shape.x + shape.width &&
                         mouseY >= shape.y + shape.height - 10 &&
                         mouseY <= shape.y + shape.height
                     ) {
                         isScalingShape = true;
                         shapeBeingScaled = shape;
                         scalingCorner = 'bottom-center';
                         originalWidth = shape.width;
                         originalHeight = shape.height;
                     } else {
                         isDraggingShape = true;
                         shapeBeingDragged = shape;
                         offsetX = mouseX - shape.x;
                         offsetY = mouseY - shape.y;
                     }
                 }
             });
         });

        //   console.log(`Clicked on a ${shape.type} shape.`);
         canvas.addEventListener('mousemove', (e) => {
             const mouseX = e.clientX - canvas.getBoundingClientRect().left;
             const mouseY = e.clientY - canvas.getBoundingClientRect().top;
             if (isScalingShape && e.altKey) {
                 if (scalingCorner === 'bottom-center') {
                     const newWidth = originalWidth + (mouseX - (shapeBeingScaled.x + shapeBeingScaled.width));
                     const newHeight = originalHeight + (mouseY - (shapeBeingScaled.y + shapeBeingScaled.height));

                     shapeBeingScaled.width = Math.max(10, newWidth);
                     shapeBeingScaled.height = Math.max(10, newHeight);
                     drawCanvas();
                 }
             } else if (isDraggingShape && e.ctrlKey) {
                 shapeBeingDragged.x = mouseX - offsetX;
                 shapeBeingDragged.y = mouseY - offsetY;
                 drawCanvas();
             }
         });

         canvas.addEventListener('mouseup', () => {
             isDraggingShape = false;
             isScalingShape = false;
             shapeBeingDragged = null;
             shapeBeingScaled = null;
             scalingCorner = null;
         });

         canvas.addEventListener('mousemove', (e) => {
             const mouseX = e.clientX - canvas.getBoundingClientRect().left;
             const mouseY = e.clientY - canvas.getBoundingClientRect().top;
             defaultShapes.forEach(shape => {
                 if (
                     mouseX >= shape.x &&
                     mouseX <= shape.x + shape.width &&
                     mouseY >= shape.y &&
                     mouseY <= shape.y + shape.height
                 ) {
                     selectedShape = shape;
                     shapes.push({ ...shape });
                     drawCanvas();
                 }
             });
         });

         function drawCanvas() {
             gl.clearRect(0, 0, canvas.width, canvas.height);
             drawDefaultShapes();
             shapes.forEach(shape => {
                 if (shape.type === 'rectangle') {
                     gl.fillStyle = shape.color;
                     gl.fillRect(shape.x, shape.y, shape.width, shape.height);
                 } else if (shape.type === 'triangle') {
                     gl.fillStyle = shape.color;
                     gl.beginPath();
                     gl.moveTo(shape.x, shape.y);
                     gl.lineTo(shape.x + shape.width, shape.y);
                     gl.lineTo(shape.x + shape.width / 2, shape.y - shape.height);
                     gl.closePath();
                     gl.fill();
                 }
             });
         }

         const deleteButton = document.getElementById('delete-button');
         let closestIndex = -1;
         deleteButton.addEventListener('click', (e) => {
             const x = e.clientX - canvas.getBoundingClientRect().left;
             const y = e.clientY - canvas.getBoundingClientRect().top;
             let closestDistance = Number.MAX_SAFE_INTEGER;
             shapes.forEach((shape, index) => {
                 const distance = Math.sqrt((x - shape.x) ** 2 + (y - shape.y) ** 2);
                 if (distance < closestDistance) {
                     closestDistance = distance;
                     closestIndex = index;
                 }
             });
             if (closestIndex !== -1) {
                 shapes.splice(closestIndex, 1);
                 drawCanvas();
             }
             div.style.display = 'none';
         });

         const copyButton = document.getElementById('Copy-button');
         copyButton.addEventListener('click', (e) => {
             if (selectedShape) {
                 let x = e.clientX - canvas.getBoundingClientRect().left;
                 let y = e.clientY - canvas.getBoundingClientRect().top;
                 const copiedShape = { ...selectedShape };
                 copiedShape.x = x;
                 copiedShape.y = y;
                 copiedShape.id = Date.now().toString();
                 shapes.push(copiedShape);
                 drawCanvas();

             }
             div.style.display = 'none';
         });

        drawDefaultShapes();
    </script>
</body>
  </html>  